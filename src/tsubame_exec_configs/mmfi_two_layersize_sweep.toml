[connection]
host = "tsubame"

[sync.code]
from = "~/prog/csi_to_image"
to = "~"
excludes = [".*", "__*", "lightning_logs", "env"]

[exec]
cmd = ["python -m src.encoder.training_latents -p /gs/fs/tga-nlab/eshan/csi_image_data/datasets/mmfi_hands_two -n 500_middle --epochs 1000 -b 32 --layer-sizes 342 1000 500 500 500 1000 16384",
"python -m src.encoder.training_latents -p /gs/fs/tga-nlab/eshan/csi_image_data/datasets/mmfi_hands_two -n 500_middle_big --epochs 1000 -b 32 --layer-sizes 342 2000 1000 500 1000 2000 16384",
"python -m src.encoder.training_latents -p /gs/fs/tga-nlab/eshan/csi_image_data/datasets/mmfi_hands_two -n 125_middle --epochs 1000 -b 32 --layer-sizes 342 1000 500 250 125 250 500 1000 16384",
"python -m src.encoder.training_latents -p /gs/fs/tga-nlab/eshan/csi_image_data/datasets/mmfi_hands_two -n all_500 --epochs 1000 -b 32 --layer-sizes 342 500 500 500 500 16384",
"python -m src.encoder.training_latents -p /gs/fs/tga-nlab/eshan/csi_image_data/datasets/mmfi_hands_two -n test1 --epochs 1000 -b 32 --layer-sizes 342 1000 500 250 500 1000 10000 16384",
"python -m src.encoder.training_latents -p /gs/fs/tga-nlab/eshan/csi_image_data/datasets/mmfi_hands_two -n test2 --epochs 1000 -b 32 --layer-sizes 342 500 250 500 1000 10000 16384",
"python -m src.encoder.training_latents -p /gs/fs/tga-nlab/eshan/csi_image_data/datasets/mmfi_hands_two -n test3 --epochs 1000 -b 32 --layer-sizes 342 500 250 500 1000 10000 16384"
]
max_runtime = "24:00:00"
name = "mmfi_two_layer_size_sweep"
group = "tga-nlab"

[exec.env]
dir = "csi_to_image" # required, directory from which to run cmd
modules = ["intel", "cuda"]
python_deps = [
"torch",
"torchvision",
"numpy",
"diffusers",
"transformers",
"accelerate",
"lightning",
"more-itertools"
]
env_vars = {PYTORCH_CUDA_ALLOC_CONF = "expandable_segments:True"}

[exec.resource]
type = "node_f"
count = 1
